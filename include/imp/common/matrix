#ifndef    IMP_COMMON_MATRIX_HEADER
#   define IMP_COMMON_MATRIX_HEADER

#include <memory>
#include <iomanip>
#include <cstring>
#include <cmath>
#include <random>

#include <ex/range_check>
#include <ex/common/type>
#include <ex/common/policy>
#include <ex/policy/notice>
#include <ex/meta/selector>
#include <ex/meta/math_type>
#include <ex/random>


#define EIGEN_MATRIX_PLUGIN "imp/internal/matrix_plugin"

#ifndef _MSC_VER
#   pragma GCC diagnostic push
#   pragma GCC diagnostic ignored "-Wattributes"
#   include <Eigen/Core>
#   pragma GCC diagnostic pop
#else
#   include <Eigen/Core>
#endif


namespace imp
{


template
<
    typename T,
    int Rows = Eigen::Dynamic,
    int Cols = Eigen::Dynamic,
    int MaxRows = Rows,
    int MaxCols = Cols,
    int Options = Eigen::RowMajor
>
using Matrix = Eigen::Matrix<T, Rows, Cols, Options, MaxRows, MaxCols>;



template
<
    typename T,
    int Rows = Eigen::Dynamic,
    int Cols = Eigen::Dynamic,
    int MaxRows = Rows,
    int MaxCols = Cols,
    int Options = Eigen::RowMajor
>
using Array = Eigen::Array<T, Rows, Cols, Options, MaxRows, MaxCols>;



template
<
    typename T,
    int Rows = Eigen::Dynamic,
    int MaxRows = Rows
>
using Vector = Matrix<T, Rows, 1, MaxRows, 1, Eigen::ColMajor>;



template
<
    typename T,
    int Cols = Eigen::Dynamic,
    int MaxCols = Cols
>
using RowVector = Matrix<T, 1, Cols, 1, MaxCols, Eigen::RowMajor>;



template
<
    typename PlainObjectType,
    int MapOptions = Eigen::Unaligned,
    typename StrideType = Eigen::Stride<0,0>
>
using Map = Eigen::Map<PlainObjectType, MapOptions, StrideType>;


//
// IMatrix: any Matrix, Vector, Expression(m1+m2)
//     \---> contains matrix operations: prod/dot, norm, LU-/QR-decompositions
//
template <typename M>
using IMatrix = Eigen::MatrixBase<M>;


//
// IArray: any Array and array expressions(a1+a2)
//     \---> contains element-wise operatios: +, *, cos, abs, ...
//
template <typename A>
using IArray = Eigen::ArrayBase<A>;


//
// IDense: any IMatrix or IArray objects
//     \---> contains base methods: indexing, resize, comparison, fillers (Zero/Random/Ones/...)
//
template <typename D>
using IDense = Eigen::DenseBase<D>;


template <typename D>
using IReadOnlyDense = Eigen::DenseCoeffsBase<D, Eigen::ReadOnlyAccessors>;


}

#endif // IMP_COMMON_MATRIX_HEADER
